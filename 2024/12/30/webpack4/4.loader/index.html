<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>4.loader | ypfçš„åšå®¢</title><meta name="author" content="ypf"><meta name="copyright" content="ypf"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ä¸ºä»€ä¹ˆä¼šæœ‰loader webpackåªèƒ½å¤„ç†.jså’Œ.jsonæ–‡ä»¶,ä½†æ‰“åŒ…è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–ç±»å‹æ–‡ä»¶ï¼Œå¦‚.vueã€.tsã€å›¾ç‰‡ã€.cssç­‰ï¼Œwebpackå°±æ— èƒ½ä¸ºåŠ›äº†,é¢å¯¹è¿™ä¸€é—®é¢˜ï¼Œwebpackæä¾›äº†loaderæœºåˆ¶,ç”¨æ¥å°†webpackä¸èƒ½è¯†åˆ«çš„æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºæ ‡å‡†çš„jsæ¨¡å—. loaderçš„æœ¬è´¨å°±æ˜¯"><link rel="shortcut icon" href="/ypf-blog/img/favicon.png"><link rel="canonical" href="https://mystylemylife.github.io/ypf-blog/2024/12/30/webpack4/4.loader/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/ypf-blog/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.staticfile.net/font-awesome/6.7.1/css/all.min.css"><script>const GLOBAL_CONFIG = {
  root: '/ypf-blog/',
  algolia: undefined,
  localSearch: {"path":"/ypf-blog/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"4.loader",isPost:!0,isHome:!1,isHighlightShrink:void 0,isToc:!0,postUpdate:"2025-02-12 14:48:08"}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mystylemylife/ypf-blog/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mystylemylife/ypf-blog/assets/css/atom-one-dark.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAABhdJREFUeF7tnW9MlmUUxg+ELHGtTEWCRmt+sD9SCYrYIGtJpmkuR0NMIh2mgIEaBEaJaAhCooOAbBQGtgHhWolbm9CXam0xy3IUNSotczkSRHOrJtBulnPo8/g+HN4X33O47i984Dn3fa7r957z3Hvu94/PrIXPDhCGWgd8AFgt20FhAKybLwAr5wvAAKzdAeX6cA8GYOUOKJeHCgZg5Q4ol4cKBmDlDiiXhwoGYOUOKJeHCgZg5Q4ol4cKBmDlDiiXhwoGYOUOKJeHCgZg5Q4ol4cKBmDlDiiXhwoGYOUOKJeHCgZg5Q4ol4cKBmDlDiiXhwoGYOUOKJeHCgZg5Q4ol4cKBmDlDiiXhwoG4OvngK+vL5VvzyR//3GWSXxx5Bi9U/+RRxNMevoJio58wHKNjs4TtGvvfo+uP9LJvbqC/cf50eH6CgoYf6OlzoGBAUrK2Erfdx4fqQ+W8dOn3UF1Zfnk4+Nj+f8j33bQupxCj6ztrkm9GrAROTcijMq2Z9rq7T7bSwtWpLvLjyHzfPxeGU2aeLPl3H//8y/FLk8j89ebh9cDNuaV5m2gmDkzbX1sPNhCJVV1bvU5c91Kin8y1nbODXml9HnbN25d0xOTiQDspFXHp+TSL7/+7haP7gwNoYaqAtvW3PpZG+XseMMta3l6EhGAjQlREWGDGy67cbqrmxYnbXSLX4fq9lDgpImWc507f4FiE9ZTf3+/W9by9CRiABsjXt+SQfOiwm092dfYTBX73h+RZ+mr4ykxbpHtpm7Vpm3U/sPPI1pjNINFAXbVqvv7B+ip5Cw69UcXy8PQkCBqeqvItjV74l7PSnQYQaIAD7bq8BlU/lqWrcTfTp2mZckvDcOCy5d+WLOLgqdOtox15y2AlRwzSBxgo7Pk1XR6eG6ErWTTpk27Hs5Ym7iMkhOWWoaYzhD3fDaZF4+0IRKwn98N1NpQafsApK+vj5Y89yJ1nelxxCM4aAp9UF1Cvr7WDzQq322imoaDjubytotEAnbSqjuPn6SE1FxHfh+oLqbQ4KmW1w5nHkeLjfJFYgEbn4pfSadHHrRv1ebhh9kYXWusil9CqUlxlpdcvNhHixIzqKf3/Chjcd9yogG7atUG0IIVL9C5vy5YOjb51lvoUO0e29acv7uamg9/6j63r8NMogEbvyJn3ksVBfa75i+/bqe03GJLa/eXbyNzoGA1vjrWQWuzvfsgwcnrRTxgI7Lo5fX0aPRsW71rsgroaPuPQ/6/eH405W1aYxkj5SBhzAA2rbqlvoImBIy31Hymp5cef+byiZM5fjTHkObBidWQcpAwZgAbobPvv4cqC7NtNb9Ze4De/v/NAaVbN1KMzSG+pIOEMQXYiC3cnEbzYyJtd8RmwxUSNIVqy/Itr5F2kDDmALtq1W1Hv6PbgwPptsCrH0ead4dIO0gYc4CN4Fn33U1VRTlOtA+5pqm5lXZW1g47ztsDVOyirzR5R04qxT40x7H3Ug8SnAhUCdi8G7OloYJumhDg0gPJBwkuxWn+5bPwsLto787NLj2QfJDgUpxmwEZ8QXYKPTYvytaHn06cpOUpzg4knJjpjdeobNGXjDat+pPGSssHIOZIceFK2QcJTl5QqgEbA2p2b6EZ06dd5cWf3WcHAWsfAKycMAADsGwH0KKV/8Q7AAOw7BblInvcg1XjJf2/AI4WjRatuobRolXjRYtWjheAAVi6A9hkYZMl/TV8zfyxyVKNF/dg5XgBGIClO2A+7WA+9XDlMN/jsXS1/bf2SNd9KX/192AtoLg6AJjrnJA4ABYCipsmAHOdExIHwEJAcdMEYK5zQuIAWAgobpoAzHVOSBwACwHFTROAuc4JiQNgIaC4aQIw1zkhcQAsBBQ3TQDmOickDoCFgOKmCcBc54TEAbAQUNw0AZjrnJA4ABYCipsmAHOdExIHwEJAcdMEYK5zQuIAWAgobpoAzHVOSBwACwHFTROAuc4JiQNgIaC4aQIw1zkhcQAsBBQ3TQDmOickDoCFgOKmCcBc54TEAbAQUNw0AZjrnJA4ABYCipsmAHOdExIHwEJAcdMEYK5zQuIAWAgobpr/AdetiMf12lDxAAAAAElFTkSuQmCC" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/ypf-blog/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">76</div></a><a href="/ypf-blog/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="/ypf-blog/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">21</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/ypf-blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> gwy</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/ypf-blog/categories/gwy/LFTT/"><span>LFTT</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/ypf-blog/" title="ypfçš„åšå®¢"><span class="site-name">ypfçš„åšå®¢</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/ypf-blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> gwy</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/ypf-blog/categories/gwy/LFTT/"><span>LFTT</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">4.loader</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-12-30T08:42:50.644Z" title="å‘è¡¨äº 2024-12-30 16:42:50">2024-12-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-02-12T06:48:08.950Z" title="æ›´æ–°äº 2025-02-12 14:48:08">2025-02-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/ypf-blog/categories/webpack4/">webpack4</a></span></div><div class="meta-secondline"></div></div></div><article class="post-content" id="article-container"><h1 id="ä¸ºä»€ä¹ˆä¼šæœ‰loader"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰loader" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰loader"></a>ä¸ºä»€ä¹ˆä¼šæœ‰loader</h1><ul><li>webpackåªèƒ½å¤„ç†<code>.jså’Œ.jsonæ–‡ä»¶</code>,ä½†æ‰“åŒ…è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–ç±»å‹æ–‡ä»¶ï¼Œå¦‚<code>.vueã€.tsã€å›¾ç‰‡ã€.css</code>ç­‰ï¼Œwebpackå°±æ— èƒ½ä¸ºåŠ›äº†,é¢å¯¹è¿™ä¸€é—®é¢˜ï¼Œwebpackæä¾›äº†loaderæœºåˆ¶,ç”¨æ¥å°†webpackä¸èƒ½è¯†åˆ«çš„æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºæ ‡å‡†çš„jsæ¨¡å—.</li><li>loaderçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>,webpackå†…éƒ¨çš„<code>loader runner</code>ä¼šè°ƒç”¨æ­¤å‡½æ•°ï¼Œç„¶åå°†ä¸Šä¸€ä¸ªloaderäº§ç”Ÿçš„ç»“æœæˆ–è€…èµ„æºæ–‡ä»¶ä¼ å…¥è¿›å»</li></ul><h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨loaderæ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„ï¼Œé™¤å»<code>inline-loader</code>ä¸‹é¢ä¼šè®²åˆ°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">rules</span>: [<br>    &#123;<br>      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,<br>      <span class="hljs-comment">// use: [&quot;babel-loader&quot;],</span><br>      <span class="hljs-comment">// loader: &quot;babel-loader&quot;,</span><br>      <span class="hljs-comment">// use:&#123;</span><br>      <span class="hljs-comment">//   loader: &#x27;babel-loader&#x27;,</span><br>      <span class="hljs-comment">// &#125;,</span><br>      <span class="hljs-attr">use</span>: [<br>        &#123;<br>          <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;babel-loader&#x27;</span>, <span class="hljs-comment">// ä¼šå»æ‰¾node_modulesä¸­çš„babel-loader</span><br>          <span class="hljs-comment">// loader: path.join(__dirname, &quot;loaders/babel-loader.js&quot;), // å¼•ç”¨æœ¬åœ°loader</span><br>          <span class="hljs-attr">options</span>: &#123;<br>            <span class="hljs-attr">presets</span>: [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>],<br>          &#125;,<br>        &#125;,<br>      ],<br>    &#125;,<br>  ],<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹åˆ°, ä½¿ç”¨çš„æ—¶å€™æœ‰å¤šç§å†™æ³•</p><ul><li>æˆ‘ä»¬å¯ä»¥<code>use: å¯¹è±¡ã€å­—ç¬¦ä¸²ã€æ•°ç»„ã€æ•°ç»„å¯¹è±¡</code>, ä¸€èˆ¬æˆ‘ä»¬ç”¨æœ€åä¸€ç§,å¯ä»¥ä¼ å¤šä¸ªä¸”èƒ½ä¼ optionsè¿›è¡Œé…ç½®</li><li>loaderå¯ä»¥å¼•ç”¨<strong>æœ¬åœ°è·¯å¾„</strong>,ä¹Ÿå¯ä»¥å¼•ç”¨node_modulesä¸­çš„loader</li><li>å¦‚æœè§‰å¾—æœ¬åœ°è·¯å¾„å†™æ³•ä¸ä¼˜é›…,æˆ‘ä»¬é€šè¿‡<strong>resolveLoader</strong>é…ç½®webpackæŸ¥æ‰¾loaderæ–¹å¼<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"> <span class="hljs-comment">// webpackæ‰¾loaderæ–¹å¼, ä¼˜å…ˆåŒ¹é…node_modulesä¸­çš„loader, æ‰¾ä¸åˆ°å†ä¾æ¬¡åŒ¹é…loadersä¸­çš„loader</span><br><span class="hljs-attr">resolveLoader</span>: &#123;<br>  <span class="hljs-attr">modules</span>: [<span class="hljs-string">&quot;node_modules&quot;</span>, path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&quot;loaders&quot;</span>)],<br>&#125;,<br><span class="hljs-attr">rules</span>: [<br>   &#123;<br>     <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,<br>     <span class="hljs-attr">use</span>: [<br>       &#123;<br>         <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;babel-loader&#x27;</span>,  <span class="hljs-comment">// ä»å†™babel-loader</span><br>         <span class="hljs-attr">options</span>: &#123;<br>           <span class="hljs-attr">presets</span>: [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>],<br>         &#125;,<br>       &#125;,<br>     ],<br>   &#125;,<br> ],<br></code></pre></td></tr></table></figure></li></ul><h1 id="loaderåˆ†ç±»"><a href="#loaderåˆ†ç±»" class="headerlink" title="loaderåˆ†ç±»"></a>loaderåˆ†ç±»</h1><p>åœ¨webpackä¸­,ä»loaderçš„æ‰§è¡Œæ—¶æœº, å¯ä»¥åˆ†ä¸º4ç§,æ‰§è¡Œé¡ºåº: <code>pre -&gt; normal -&gt; inline -&gt; post</code></p><ul><li><strong>pre</strong>: å‰ç½®loader</li><li><strong>normal</strong>: æ™®é€šloader</li><li><strong>inline</strong>: å†…è”loader</li><li><strong>post</strong>: åç½®loader</li></ul><h2 id="é…ç½®loader"><a href="#é…ç½®loader" class="headerlink" title="é…ç½®loader"></a>é…ç½®loader</h2><ul><li><strong>pre</strong>å’Œ<strong>post</strong>å’Œ<strong>normal</strong>éƒ½æ˜¯é€šè¿‡ruleå¯¹è±¡çš„<code>enforceé…ç½®</code>çš„, ä¸ä¼ enforce, é»˜è®¤æ˜¯normal<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// webpack.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.txt$/i</span>,<br>        <span class="hljs-attr">use</span>: [<span class="hljs-string">&quot;a-loader&quot;</span>],<br>        <span class="hljs-attr">enforce</span>: <span class="hljs-string">&quot;post&quot;</span>, <span class="hljs-comment">// post loader</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.txt$/i</span>,<br>        <span class="hljs-attr">use</span>: [<span class="hljs-string">&quot;b-loader&quot;</span>], <span class="hljs-comment">// normal loader</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.txt$/i</span>,<br>        <span class="hljs-attr">use</span>: [<span class="hljs-string">&quot;c-loader&quot;</span>],<br>        <span class="hljs-attr">enforce</span>: <span class="hljs-string">&quot;pre&quot;</span>, <span class="hljs-comment">// pre loader</span><br>      &#125;,<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure></li></ul><h2 id="å†…è”loader"><a href="#å†…è”loader" class="headerlink" title="å†…è”loader"></a>å†…è”loader</h2><ul><li><strong>inline</strong>æ¯”è¾ƒç‰¹æ®Š,å®ƒåªèƒ½åœ¨<strong>ä»£ç ä¸­</strong>å¼•å…¥æ¨¡å—çš„æ—¶å€™è¿›è¡Œå£°æ˜, è¯­æ³•å¦‚ä¸‹,å®˜æ–¹æ–‡æ¡£<a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/loaders/#using-loaders">loader</a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;inliner-loader1?type=abc&amp;limit=64!inliner-loader2?type=abc!./index.js&#x27;</span><br><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;inliner-loader1?type=abc!inliner-loader2?type=abc!./index.js&#x27;</span>)<br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨<code>!</code>è¿›è¡Œåˆ†å‰², æœ€åä¸€å—æ˜¯è¦è§£æçš„æ–‡ä»¶</li><li>æ¯ä¸ªloaderéƒ½å¯ä»¥é…ç½®options, ç±»ä¼¼queryå‚æ•°</li><li>æˆ‘ä»¬å¯ä»¥åœ¨<strong>æœ€å‰é¢</strong>åŠ ä¸Š3ç§æ–¹å¼æ¥æ§åˆ¶é…ç½®loaderå¦‚ä½•æ‰§è¡Œ<ul><li><strong>!</strong>: ä¸æ‰§è¡Œnormal-loader</li><li><strong>!!</strong>:ä¸æ‰§è¡Œæ‰€æœ‰é…ç½®loader</li><li><strong>-!</strong>: ä¸æ‰§è¡Œpre-loaderå’Œnormal-loader<br>å¦‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;!inliner-loader1!inliner-loader2!./index.js&#x27;</span>)<br><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;!!inliner-loader1!inliner-loader2!./index.js&#x27;</span>)<br><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;-!inliner-loader1!inliner-loader2!./index.js&#x27;</span>)<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="å¼‚æ­¥loader"><a href="#å¼‚æ­¥loader" class="headerlink" title="å¼‚æ­¥loader"></a>å¼‚æ­¥loader</h2><p>ä¸Šé¢å››ç§loaderé»˜è®¤éƒ½æ˜¯åŒæ­¥çš„,å¦‚æœéœ€è¦å¼‚æ­¥, æˆ‘ä»¬å¯ä»¥è¿™æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// async-loader</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>)&#123;<br>    <span class="hljs-keyword">let</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">async</span>();<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>,source+<span class="hljs-string">&#x27;//async2&#x27;</span>)<br>    &#125;, <span class="hljs-number">5000</span>);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è°ƒç”¨asyncæ–¹æ³•,å¯ä»¥æŠŠloaderæ‰§è¡Œä»åŒæ­¥æ”¹ä¸ºå¼‚æ­¥</li><li>è™½ç„¶loaderæ­¤æ—¶æ˜¯å¼‚æ­¥çš„,ä½†æ˜¯æ­¤æ—¶ä¼šè¿›å…¥é˜»å¡çŠ¶æ€, åªæœ‰ç­‰å¾…è°ƒç”¨callbackå,æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªloader,æ¯”å¦‚ loader1ã€å¼‚æ­¥loader2ã€loader3, æ‰§è¡Œé¡ºåºæ˜¯: <code>å…ˆè¾“å‡ºloader1ã€5såè¾“å‡ºloader2ã€æœ€åè¾“å‡ºloader3</code></li></ul><h1 id="loaderæ‰§è¡Œé¡ºåº"><a href="#loaderæ‰§è¡Œé¡ºåº" class="headerlink" title="loaderæ‰§è¡Œé¡ºåº"></a>loaderæ‰§è¡Œé¡ºåº</h1><h2 id="æ— pitch"><a href="#æ— pitch" class="headerlink" title="æ— pitch"></a>æ— pitch</h2><ul><li>ä»ç§ç±»æ¥çœ‹: <code>pre -&gt; normal -&gt; inline -&gt; post</code></li><li>ä»æ‰§è¡Œæ–¹å‘çœ‹: <code>å€’åºæ‰§è¡Œ/ä»å³å‘å·¦/ä»ä¸‹å¾€ä¸Š</code>, æ¯”å¦‚<code>use:[loader1 ,loader2 ,loader3]</code>, æ‰§è¡Œé¡ºåºæ˜¯: <code>loader3 -&gt; loader2 -&gt; loader1</code></li></ul><h2 id="æœ‰pitch"><a href="#æœ‰pitch" class="headerlink" title="æœ‰pitch"></a>æœ‰pitch</h2><p>pitchè‹±æ–‡æŠ›çš„æ„æ€,åœ¨ä»£ç é‡Œç›¸å½“äºç†”æ–­.<br>æ­£å¸¸loaderæ˜¯ä¸€ä¸ªå‡½æ•°,å¦‚æœæˆ‘ä»¬ç»™loaderå®šä¹‰ä¸€ä¸ªpitchå‡½æ•°,é‚£ä¹ˆæ‰§è¡Œé¡ºåºå°±ä¸ä¸€æ ·äº†:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">function</span> (<span class="hljs-params">content, map, meta</span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;a-loaderæ‰§è¡Œ&quot;</span>);<br> <span class="hljs-keyword">return</span> content;<br>&#125;;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;a-loader pitchæ‰§è¡Œ&quot;</span>);<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢workflow: å…ˆæ‰§è¡Œpitch,å†æ‰§è¡Œloader.</p><h3 id="ä¾‹å­ğŸŒ°1"><a href="#ä¾‹å­ğŸŒ°1" class="headerlink" title="ä¾‹å­ğŸŒ°1"></a>ä¾‹å­ğŸŒ°1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">use</span>:[loader1,loader2,loader3]  <span class="hljs-comment">// æ¯ä¸ªéƒ½ç»‘å®špitchå‡½æ•°,é‚£ä¹ˆæ‰§è¡Œé¡ºåºæ˜¯:</span><br><span class="hljs-comment">//loader1</span><br><span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">function</span> (<span class="hljs-params">content, map, meta</span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader1æ‰§è¡Œ&quot;</span>);<br> <span class="hljs-keyword">return</span> content+<span class="hljs-string">&#x27;1&#x27;</span>;<br>&#125;;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader1 pitchæ‰§è¡Œ&quot;</span>);<br>&#125;;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> =loader<br><br><span class="hljs-comment">//loader2</span><br><span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">function</span> (<span class="hljs-params">content, map, meta</span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader2æ‰§è¡Œ&quot;</span>);<br> <span class="hljs-keyword">return</span> content+<span class="hljs-string">&#x27;2&#x27;</span>;<br>&#125;;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader2 pitchæ‰§è¡Œ&quot;</span>);<br>&#125;;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> =loader<br><br><span class="hljs-comment">// loader3</span><br><span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">function</span> (<span class="hljs-params">content, map, meta</span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader3æ‰§è¡Œ&quot;</span>);<br> <span class="hljs-keyword">return</span> content+<span class="hljs-string">&#x27;3&#x27;</span>;<br>&#125;;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader3 pitchæ‰§è¡Œ&quot;</span>);<br>&#125;;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> =loader<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ:</p><ul><li><code>loader1-pitch -&gt; loader2-pitch -&gt; loader3-pitch -&gt; loader3 -&gt; loader2 -&gt; loader1</code></li><li>æ‰“å°ç»“æœ:resultè¡¨ç¤ºæ‰§è¡Œloaderè½¬æ¢åçš„ç»“æœ,ä»¥åŠå¯¹åº”çš„äºŒè¿›åˆ¶resourceBuffer<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="images/1.jpg" width="80%"></li></ul><h3 id="ä¾‹å­ğŸŒ°2"><a href="#ä¾‹å­ğŸŒ°2" class="headerlink" title="ä¾‹å­ğŸŒ°2"></a>ä¾‹å­ğŸŒ°2</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">use</span>:[loader1,loader2,loader3]  <span class="hljs-comment">// æ¯ä¸ªéƒ½ç»‘å®špitchå‡½æ•°,é‚£ä¹ˆæ‰§è¡Œé¡ºåºæ˜¯:</span><br><span class="hljs-comment">//loader1</span><br><span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">function</span> (<span class="hljs-params">content, map, meta</span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader1æ‰§è¡Œ&quot;</span>);<br> <span class="hljs-keyword">return</span> content+<span class="hljs-string">&#x27;1&#x27;</span>;<br>&#125;;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader1 pitchæ‰§è¡Œ&quot;</span>);<br>&#125;;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> =loader<br><br><span class="hljs-comment">//loader2</span><br><span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">function</span> (<span class="hljs-params">content, map, meta</span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader2æ‰§è¡Œ&quot;</span>);<br> <span class="hljs-keyword">return</span> content+<span class="hljs-string">&#x27;2&#x27;</span>;<br>&#125;;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;2&#x27;</span><br>&#125;;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> =loader<br><br><span class="hljs-comment">// loader3</span><br><span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">function</span> (<span class="hljs-params">content, map, meta</span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader3æ‰§è¡Œ&quot;</span>);<br> <span class="hljs-keyword">return</span> content+<span class="hljs-string">&#x27;3&#x27;</span>;<br>&#125;;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;loader3 pitchæ‰§è¡Œ&quot;</span>);<br>&#125;;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> =loader<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ:</p><ul><li><code>loader1-pitch -&gt; loader2-pitch -&gt; loader1-loader</code></li><li>å¦‚æœpitchæœ‰returnè¿”å›å€¼(returnä¸è¡Œ,éœ€è¦æœ‰å€¼),é‚£ä¹ˆç›´æ¥è·³å‡º,æ‰§è¡Œä¸Šä¸€ä¸ªloader,ä¸€æ¬¡å€’åºæ‰§è¡Œ</li><li>æ‰“å°ç»“æœ:resultæ­¤æ—¶æ˜¯-pickè¿”å›çš„å€¼ä¼ é€’ç»™ä¸Šä¸€ä¸ªloaderçš„source, å¤„ç†åçš„ç»“æœ<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="images/2.jpg" width="80%"></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="images/3.jpg" width="80%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="images/4.jpg" width="80%"><ul><li>ä¸Šå›¾å¾ˆæ¸…æ™°,loaderğŸˆ¶ä¸¤ä¸ªé˜¶æ®µ,<code>normalå’Œpitch</code>, normalå°±æ˜¯æ­£å¸¸çš„loaderå‡½æ•°.</li><li>pitch<strong>æ²¡æœ‰è¿”å›å€¼</strong>,æ‰§è¡Œpitchç»“æŸå, ä¼šè¯»å–æ–‡ä»¶å†…å®¹ä½œä¸ºsourceä¾æ¬¡ä¼ ç»™loaderçš„sourceå¤„ç†.(æ³¨æ„æ˜¯åœ¨pitché˜¶æ®µå…¨éƒ¨å¤„ç†å®Œæˆåï¼Œè¿™ä¸€æ­¥æ‰ä¼šè¯»å–å¼•å…¥çš„èµ„æºæ–‡ä»¶å†…å®¹ã€‚)</li><li><strong>æœ‰è¿”å›å€¼</strong>, sourceç›´æ¥æ˜¯pichçš„è¿”å›å€¼, å†ä¼ ç»™ä¸Šä¸€ä¸ªloaderçš„sourceä¾æ¬¡loaderå¤„ç†(å³æ‰“ç ´åŸæœ‰é¡ºåºæ‰å¤´æ‰§è¡Œ)</li><li>å®é™…loaderçš„æ‰§è¡Œæ˜¯è°ƒç”¨äº†<code>loader-runner</code>çš„runLoadersæ–¹æ³•.<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; runLoaders &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;loader-runner&quot;</span>); <span class="hljs-comment">// æ˜¯ä¸€ä¸ªæ‰§è¡Œloaderé“¾æ¡çš„æ¨¡å—(webpackä¼šè‡ªåŠ¨å®‰è£…)</span><br><span class="hljs-title function_">runLoaders</span>(<br>  &#123;<br>    <span class="hljs-attr">resource</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&quot;src/index.js&quot;</span>), <span class="hljs-comment">// è§£æçš„æ–‡ä»¶</span><br>    loaders, <span class="hljs-comment">// loaderç»å¯¹è·¯å¾„æ•°ç»„</span><br>    <span class="hljs-attr">readResource</span>: fs.<span class="hljs-property">readFile</span>.<span class="hljs-title function_">bind</span>(fs), <span class="hljs-comment">// è¯»æ–‡ä»¶æ–¹æ³•</span><br>  &#125;,<br>  <span class="hljs-function">(<span class="hljs-params">err, result</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);<br>  &#125;<br>);<br></code></pre></td></tr></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="images/5.jpg" width="50%"></li></ul><h3 id="loader-runner"><a href="#loader-runner" class="headerlink" title="loader-runner"></a>loader-runner</h3><p>æˆ‘ä»¬éœ€è¦äº†è§£ä¸‹loader-runnerçš„è¿è¡Œæœºåˆ¶. å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªloaderçš„é…ç½®å¦‚ä¸‹: <code>!loader1!loader2!loader3!./src/index.js</code></p><ul><li>å…ˆåˆ‡å‰²å˜æˆæ•°ç»„<code>[loader1,loader2,loader3]</code>ä¼ é€’ç»™loader-runner</li><li>loader-runnerä¼šæ„é€ ä¸€ä¸ªä¸Šä¸‹æ–‡<code>loaderContext</code>å¯¹è±¡,ä¾›æ‰§è¡Œpitchå’Œnormalå‡½æ•°çš„thisæŒ‡é’ˆ<ul><li>loaders: ä¸Šé¢loaderæ•°ç»„è½¬æ¢ä¸ºæ•°ç»„å¯¹è±¡,æ¯ä¸ªloaderå¯¹è±¡åŒ…å«<ul><li>loaderçš„å…¨è·¯å¾„path</li><li>queryå‚æ•°</li><li>pitchExecuted: æ˜¯å¦æ‰§è¡Œäº†pitchæ–¹æ³•, executed:è‹±æ–‡æ‰§è¡Œçš„æ„æ€</li></ul></li><li>request: å°†loaderså…¨è·¯å¾„æ•°ç»„è½¬æ¢ä¸ºå†…è”å­—ç¬¦ä¸²æ–¹å¼: xx/loader1!xx/loader2!xx/loader3!D:/src/index.js</li><li>resource: è¦è¢«å¤„ç†çš„çš„resource,å¦‚D:/src/index.js</li><li>loaderIndex: å½“å‰æ‰§è¡Œloaderå‡½æ•°(pitch/normal)çš„ç´¢å¼•</li><li>data: å½“å‰æ‰§è¡Œloaderçš„dataå‚æ•°</li><li>currentRequest: <code>å½“å‰loader+å‰©ä½™loader+resouceå­—ç¬¦ä¸²</code></li><li>remainingRequest: <code>å‰©ä½™loader+resouceå­—ç¬¦ä¸²</code>, ä¸åŒ…æ‹¬å½“å‰loaderçš„request.</li><li>previousRequest: <code>ä¹‹å‰loaderå­—ç¬¦ä¸²</code>, ä¸åŒ…æ‹¬å½“å‰loaderçš„request.</li></ul></li><li>å¾ªç¯loaders, ä¾æ¬¡æ‰§è¡Œloaderçš„pitchå‡½æ•°,<code>loaderIndex++</code><ul><li>loaderIndex=0: æ­¤æ—¶å¼€å§‹æ‰§è¡Œ<code>loader1-pitch</code><ul><li>currentRequest:<code>xx/loader1!xx/loader2!xx/loader3!D:/src/index.js</code></li><li>remainingRequest:<code>xx/loader2!xx/loader3!D:/src/index.js</code></li><li>previousRequest:<code>&#39;&#39;</code></li></ul></li><li>loaderIndex=1: loader1-pitchæ‰§è¡Œå®Œæ¯•, æ‰§è¡Œ<code>loader2-pitch</code><ul><li>currentRequest:<code>xx/loader2!xx/loader3!D:/src/index.js</code></li><li>remainingRequest:<code>xx/loader3!D:/src/index.js</code></li><li>previousRequest:<code>xx/loader1</code></li></ul></li><li>loaderIndex=2: loader2-pitchæ‰§è¡Œå®Œæ¯•, æ‰§è¡Œ<code>loader3-pitch</code><ul><li>currentRequest:<code>xx/loader3!D:/src/index.js</code></li><li>remainingRequest:<code>D:/src/index.js</code></li><li>previousRequest:<code>xx/loader1!xx/loader2</code></li></ul></li></ul></li><li>ä¾æ¬¡æ‰§è¡Œloaderçš„normalå‡½æ•°,<code>loaderIndex--</code><ul><li>loaderIndex=2: loader3-pitchæ‰§è¡Œå®Œæ¯•,å¼€å§‹æ‰§è¡Œ<code>loader3-normal</code><ul><li>currentRequest:<code>xx/loader3!D:/src/index.js</code></li><li>remainingRequest:<code>D:/src/index.js</code></li><li>previousRequest:<code>xx/loader1!xx/loader2</code></li></ul></li><li>loaderIndex=1: loader3-normalæ‰§è¡Œå®Œæ¯•,å¼€å§‹æ‰§è¡Œ<code>loader2-normal</code><ul><li>currentRequest:<code>xx/loader2!xx/loader3!D:/src/index.js</code></li><li>remainingRequest:<code>xx/loader3!D:/src/index.js</code></li><li>previousRequest:<code>xx/loader1</code></li></ul></li><li>loaderIndex=0: loader2-normalæ‰§è¡Œå®Œæ¯•,å¼€å§‹æ‰§è¡Œ<code>loader1-normal</code><ul><li>currentRequest:<code>xx/loader1!xx/loader2!xx/loader3!D:/src/index.js</code></li><li>remainingRequest:<code>xx/loader2!xx/loader3!D:/src/index.js</code></li><li>previousRequest:<code>&#39;&#39;</code></li></ul></li></ul></li></ul><ol><li>é€šè¿‡ä¸Šé¢æµç¨‹æˆ‘ä»¬å¯ä»¥çŸ¥é“pitchå’Œnormalå‡½æ•°çš„ä¸‰ä¸ªå­—æ®µè¾“å‡ºæ˜¯<strong>ä¸€æ ·çš„</strong>, æˆ‘ä»¬å¯ä»¥æŒ‰pitchæ¥ç†è§£è¿™ä¸‰ä¸ªå­—æ®µçš„ç»“æœ</li><li><code>remainingRequest</code>è¿™ä¸ªå±æ€§æ¯”è¾ƒé‡è¦,pitchå‡½æ•°å°±éœ€è¦ç”¨åˆ°è¿™ä¸ªå±æ€§æ¥å°†å‰©ä½™çš„loaderå˜æˆå†…é“¾æ‰§è¡Œ.(å› ä¸ºpitchè·³å‡ºå°±æ²¡æ³•æ‰§è¡Œåç»­äº†,æ‰€ä»¥åœ¨è¿™é‡Œæ‰‹åŠ¨æ‰§è¡Œ)</li></ol><h1 id="å¸¸ç”¨loader"><a href="#å¸¸ç”¨loader" class="headerlink" title="å¸¸ç”¨loader"></a>å¸¸ç”¨loader</h1><h2 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h2><blockquote><p><code>file-loader</code>ç”¨äºå¤„ç†éjsæ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ã€å­—ä½“ç­‰ï¼Œä¼šå°†æ–‡ä»¶æ‹·è´åˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶è¿”å›æ–‡ä»¶åœ°å€ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// webpack.config.js</span><br> <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.(jpg|png|gif|bmp)$/</span>,<br>        <span class="hljs-attr">use</span>:&#123;<br>          <span class="hljs-attr">loader</span>:<span class="hljs-string">&#x27;file-loader&#x27;</span>,<br>          <span class="hljs-attr">options</span>:&#123;<br>            <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;[hash].[ext]&#x27;</span>,<br>          &#125;<br>        &#125;<br>      &#125;,<br>    ]<br> &#125;  <br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// file-loader.js</span><br><span class="hljs-keyword">const</span> &#123; getOptions, interpolateName &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;loader-utils&quot;</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>) &#123;<br>    <span class="hljs-comment">// loader.raw = true, æ­¤æ—¶sourceè¿”å›æ˜¯ä¸ªäºŒè¿›åˆ¶æµBuffer, å¦‚æœä¸åŠ , sourceè¿”å›çš„æ˜¯utf-8å­—ç¬¦ä¸²,è¿™é‡Œå› ä¸ºæ˜¯å›¾ç‰‡æ–‡ä»¶, sourceå°±æ˜¯ä¸ªä¹±ç å­—ç¬¦ä¸²</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;åŠ è½½file-loader&quot;</span>);<br>  <span class="hljs-comment">// è·å–loaderçš„é…ç½®</span><br>  <span class="hljs-keyword">let</span> options = <span class="hljs-title function_">getOptions</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// &#123;filename: &#x27;[hash].[ext]&#x27;&#125;</span><br>  <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶å,interpolateè‹±æ–‡æ’å…¥çš„æ„æ€</span><br>  <span class="hljs-keyword">let</span> filename = <span class="hljs-title function_">interpolateName</span>(<span class="hljs-variable language_">this</span>, options.<span class="hljs-property">filename</span>, &#123; <span class="hljs-attr">content</span>: source &#125;); <span class="hljs-comment">// éœ€è¦æ ¹æ®sourceç”Ÿæˆhash</span><br>  <span class="hljs-comment">// è°ƒç”¨webpackåˆ›å»ºæ–‡ä»¶</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitFile</span>(filename, source);<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">`module.exports = <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(filename)&#125;</span>`</span>;<br>&#125;<br>loader.<span class="hljs-property">raw</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å› ä¸ºåŠ è½½çš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = loader;<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>è·å–é…ç½®</li><li>æ ¹æ®sourceä»¥åŠé…ç½®ç”Ÿæˆæ–‡ä»¶å</li><li>è°ƒç”¨webpackåˆ›å»ºæ–‡ä»¶</li><li>ä¸Šé¢å¿…é¡»åŠ <code>JSON.stringify</code>, ä¸åŠ å¦‚ä¸‹å›¾<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="images/6.jpg" width="50%"></li><li>å¦‚æœç”¨<code>module.exports</code>, ä½¿ç”¨<code>require(&#39;xx.jpg&#39;)</code>ä¸éœ€è¦åŠ default, å¦‚æœæ˜¯<code>export default</code>,éœ€è¦åŠ default, æˆ‘ä»¬åœ¨ç¬¬ä¸€èŠ‚è®²è¿‡,esæ¨¡å—ä¼šè½¬ä¸ºcommonjsæ¨¡å—,å¹¶å¢åŠ äº†default</li><li>å› ä¸ºå›¾ç‰‡æ˜¯æ–‡ä»¶æµ,æ‰€ä»¥éœ€è¦ç»™loader<strong>ç»‘å®šrawå±æ€§</strong></li></ul><h2 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h2><blockquote><p><code>url-loader</code>å¯ä»¥å°†æ‰“åŒ…è¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ–‡ä»¶è½¬æ¢ä¸º base64 æ ¼å¼å­—ç¬¦ä¸²ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ã€‚æ¯”å¦‚100ä¸ªå°å›¾ç‰‡,å¤„ç†å,åªæœ‰1ä¸ªæ–‡ä»¶, å‡å°‘100æ¬¡è¯·æ±‚, ä¼˜åŒ–äº†ç½‘ç»œè¯·æ±‚ã€‚ä½†æ³¨æ„éœ€è¦æ§åˆ¶é˜ˆå€¼,å¦åˆ™ä¼šå¯¼è‡´æ–‡ä»¶è¿‡å¤§</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// webpack.config.js</span><br> <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.(jpg|png|gif|bmp)$/</span>,<br>         <span class="hljs-attr">use</span>:&#123;<br>          <span class="hljs-attr">loader</span>:<span class="hljs-string">&#x27;url-loader&#x27;</span>,<br>          <span class="hljs-attr">options</span>:&#123;<br>            <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;[hash].[ext]&#x27;</span>,<br>            <span class="hljs-attr">limit</span>: <span class="hljs-number">8</span>*<span class="hljs-number">1024</span> <span class="hljs-comment">// 8kb   å•ä½:å­—èŠ‚ 1kb=1024byte</span><br>          &#125;<br>        &#125;<br>      &#125;,<br>    ]<br> &#125; <br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mime = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;mime&quot;</span>);<br><span class="hljs-keyword">const</span> &#123; getOptions, interpolateName &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;loader-utils&quot;</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>) &#123;<br>    <span class="hljs-comment">// loader.raw = true, æ­¤æ—¶sourceè¿”å›æ˜¯ä¸ªäºŒè¿›åˆ¶æµBuffer, å¦‚æœä¸åŠ , sourceè¿”å›çš„æ˜¯utf-8å­—ç¬¦ä¸²,è¿™é‡Œå› ä¸ºæ˜¯å›¾ç‰‡æ–‡ä»¶, sourceå°±æ˜¯ä¸ªä¹±ç å­—ç¬¦ä¸²</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;åŠ è½½url-loader&quot;</span>);<br>  <span class="hljs-comment">// è·å–loaderçš„é…ç½®</span><br>  <span class="hljs-keyword">let</span> &#123;limit,fallback=<span class="hljs-string">&#x27;file-loader&#x27;</span>&#125; = <span class="hljs-title function_">getOptions</span>(<span class="hljs-variable language_">this</span>); <br>  <span class="hljs-keyword">if</span>(limit)&#123;<br>    limit=<span class="hljs-built_in">parseInt</span>(limit); <br>  &#125;<br>  <span class="hljs-keyword">const</span> mimeType = mime.<span class="hljs-title function_">getType</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">resourcePath</span>);<span class="hljs-comment">// è·å–æ–‡ä»¶ç±»å‹, å¦‚xx/a.jpg=&gt;image/jpeg</span><br>  <span class="hljs-keyword">if</span>(!limit || source.<span class="hljs-property">length</span>&lt;limit)&#123;<br>    <span class="hljs-keyword">let</span> base64String =<span class="hljs-string">`data:<span class="hljs-subst">$&#123;mimeType&#125;</span>;base64,<span class="hljs-subst">$&#123;source.toString(<span class="hljs-string">&#x27;base64&#x27;</span>)&#125;</span>`</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">`module.exports = <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(base64String)&#125;</span>`</span><br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-keyword">let</span> fileLoader = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./&#x27;</span>+fallback);<br>    <span class="hljs-keyword">return</span> fileLoader.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>,source);<br>  &#125;<br>&#125;<br>loader.<span class="hljs-property">raw</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å› ä¸ºåŠ è½½çš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = loader;<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>åˆ¤æ–­é˜ˆå€¼ä»¥åŠè·å–æ–‡ä»¶ç±»å‹æ’å…¥base64å­—ç¬¦ä¸²</li><li>å¦‚æœä¸æ»¡è¶³é˜ˆå€¼ï¼Œåˆ™ä½¿ç”¨file-loader, æ‰€ä»¥æˆ‘ä»¬å¦‚æœç”¨äº†urrl-loaderï¼Œä¸ç”¨å†åœ¨webpack.config.jsä¸­é…ç½®file-loaderäº†, ä½†éœ€è¦å®‰è£…, å› ä¸ºä¼šä¾èµ–</li></ul><h2 id="style-loaderå’Œless-loader"><a href="#style-loaderå’Œless-loader" class="headerlink" title="style-loaderå’Œless-loader"></a>style-loaderå’Œless-loader</h2><blockquote><p><code>style-loader</code> å¯ä»¥å°† css ä»£ç æ³¨å…¥åˆ° js ä¸­ï¼Œè¿è¡Œæ—¶ï¼Œé€šè¿‡åˆ›å»º style æ ‡ç­¾ï¼Œå°†æ ·å¼æ’å…¥åˆ° head ä¸­ã€‚<br><code>less-loader</code> å°† less è½¬ä¸º css, ç„¶åäº¤ç»™ style-loader å¤„ç†ã€‚ sass-loaderåŒç†</p></blockquote><h3 id="style-loaderä½¿ç”¨normal"><a href="#style-loaderä½¿ç”¨normal" class="headerlink" title="style-loaderä½¿ç”¨normal"></a>style-loaderä½¿ç”¨normal</h3><figure class="highlight js"><figcaption><span>[toggle]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// index.js</span><br><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./index.less&#x27;</span>)<br><span class="hljs-comment">// webpack.config.js </span><br> <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.css$/</span>,<br>        <span class="hljs-attr">use</span>:[<br>          <span class="hljs-string">&#x27;style-loader&#x27;</span>, <span class="hljs-comment">// åˆ›å»ºstyleæ ‡ç­¾æ’å…¥é¡µé¢ä¸­</span><br>          <span class="hljs-string">&#x27;less-loader&#x27;</span>, <span class="hljs-comment">// å°†lessè½¬æ¢ä¸ºcss</span><br>        ]<br>      &#125;,<br>    ]<br> &#125; <br></code></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>[toggle]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// less-loader </span><br><span class="hljs-keyword">const</span> less = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;less&quot;</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>) &#123;<br>  <span class="hljs-keyword">const</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">async</span>();<br>  <span class="hljs-comment">//  å°†lessè½¬æ¢ä¸ºcss</span><br>  less.<span class="hljs-title function_">render</span>(<br>    source,<br>    &#123;<br>      <span class="hljs-attr">filename</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">resource</span>,<br>    &#125;,<br>    <span class="hljs-function">(<span class="hljs-params">err, output</span>) =&gt;</span> &#123;<br>      <span class="hljs-title function_">callback</span>(err, output.<span class="hljs-property">css</span>);<br>    &#125;<br>  );<br>&#125;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = loader;<br></code></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>[toggle]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// style-loader </span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>) &#123;<br>  <span class="hljs-keyword">let</span> style = <span class="hljs-string">`</span><br><span class="hljs-string">    let style = document.createElement(&#x27;style&#x27;);</span><br><span class="hljs-string">    style.innerHTML = <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(source)&#125;</span>;</span><br><span class="hljs-string">    document.head.appendChild(style);</span><br><span class="hljs-string"> `</span>;<br> <span class="hljs-keyword">return</span> style;<br>&#125;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = loader;<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“-3"><a href="#æ€»ç»“-3" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸Šé¢åŸç†å¾ˆç®€å•:</p><ul><li>éƒ½æ²¡æœ‰pitch, less-loaderå…ˆæ‰§è¡Œè¿”å›<code>ç¼–è¯‘åçš„css</code>,ä¼ ç»™style-loaderè¿›è¡Œ<code>æ’å…¥style</code><br>è¿™æ ·çœ‹å¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜, ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä»£ç é‡Œæœ‰<code>@import &#39;a.css&#39;</code>ä»¥åŠ<code>background:url(a.jpg)</code>è¿™ç§æœ‰é“¾æ¥çš„æƒ…å†µ, å°±æ²¡æ³•å¤„ç†, éœ€è¦é€šè¿‡<code>css-loaderå¤„ç†</code>.ä½†æ˜¯css-loaderè¿”å›çš„æ˜¯<code>è„šæœ¬,ä¸æ˜¯css</code>,æ‰€ä»¥stye-loaderæ¥å—åç›´æ¥æ’å…¥styleå°±ä¼š<code>æœ‰é—®é¢˜</code>. æ‰€ä»¥style-loaderçš„ä»£ç éœ€è¦æ”¾åˆ°<code>pitch</code>ä¸­. æˆ‘ä»¬åœ¨ä¸‹é¢å…·ä½“è®²è§£ä¸‹</li></ul><h2 id="style-loaderå’Œcss-loader"><a href="#style-loaderå’Œcss-loader" class="headerlink" title="style-loaderå’Œcss-loader"></a>style-loaderå’Œcss-loader</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// index.js</span><br><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./index.css&#x27;</span>)<br><span class="hljs-comment">// index.css</span><br>@<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./import.css&quot;</span>;<br>div&#123; <span class="hljs-attr">background</span>: <span class="hljs-title function_">url</span>(<span class="hljs-string">&#x27;./1-1.jpg&#x27;</span>);<span class="hljs-attr">color</span>:red &#125;<br><span class="hljs-comment">// webpack.config.js </span><br> <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>:<span class="hljs-regexp">/\.css$/</span>,<br>        <span class="hljs-attr">use</span>:[<br>          <span class="hljs-string">&#x27;style-loader&#x27;</span>, <span class="hljs-comment">// åˆ›å»ºstyleæ ‡ç­¾æ’å…¥é¡µé¢ä¸­</span><br>          <span class="hljs-string">&#x27;css-loader&#x27;</span>, <span class="hljs-comment">// è§£æcss</span><br>        ]<br>      &#125;,<br>    ]<br> &#125; <br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆç”¨ä¸Šé¢çš„style-loaderä¸­çš„normalå‡½æ•°é‡Œ, æ‰“å°ä¸‹css-loaderè¿”å›ç»™style-loaderçš„sourceæ˜¯å•¥æ ·çš„è„šæœ¬?<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="images/7.jpg" width="80%"></p><p>æˆ‘ä»¬æ¥åˆ†æä¸‹æµç¨‹:</p><ol><li>æ­£å¸¸é¡ºåºæ˜¯<code>style-loader-pitchã€css-loader-pitchã€css-loaderã€style-loader</code>, ä½†style-loader-pitchæœ‰è¿”å›å€¼ç›´æ¥<code>è·³å‡ºå°±ç»“æŸ</code>äº†. é‚£css-loaderæ€ä¹ˆåŠ?è¿™å°±éœ€è¦<code>remainingRequest</code>äº†.</li><li><code>remainingRequest</code>: å‰©ä½™è¿˜æœªæ‰§è¡Œçš„loader,ä¸Šé¢æˆ‘ä»¬åœ¨<code>loader-runner</code>ä¸­åˆ†æè¿‡.</li></ol><h3 id="style-loaderä½¿ç”¨pitch"><a href="#style-loaderä½¿ç”¨pitch" class="headerlink" title="style-loaderä½¿ç”¨pitch"></a>style-loaderä½¿ç”¨pitch</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// style-loader</span><br><span class="hljs-keyword">const</span> &#123; stringifyRequest &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;loader-utils&quot;</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>) &#123;<br>&#125;<br>loader.<span class="hljs-property">pitch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">remainingRequest, previousRequest, data</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;åŠ è½½style-loader-pitch&quot;</span>);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">stringifyRequest</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">`!!<span class="hljs-subst">$&#123;remainingRequest&#125;</span>`</span>)) <span class="hljs-comment">// &quot;!!../node_modules/css-loader/dist/cjs.js!./index.css&quot;</span><br>  <span class="hljs-keyword">let</span> style = <span class="hljs-string">`</span><br><span class="hljs-string">    let style = document.createElement(&#x27;style&#x27;);</span><br><span class="hljs-string">    style.innerHTML =  require(<span class="hljs-subst">$&#123;stringifyRequest(<span class="hljs-variable language_">this</span>, <span class="hljs-string">`!!<span class="hljs-subst">$&#123;remainingRequest&#125;</span>`</span>)&#125;</span>); // é‡æ–°æ‰§è¡Œloader-runner,åªæ‰§è¡Œcss-loader</span><br><span class="hljs-string">    document.head.appendChild(style);</span><br><span class="hljs-string"> `</span>;<br>  <span class="hljs-keyword">return</span> style; <br>&#125;;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = loader;<br></code></pre></td></tr></table></figure><ul><li>ä¸Šé¢æˆ‘ä»¬æŠŠ<code>style-loader</code>é€»è¾‘æ”¾åˆ°pitchä¸­,æ­¤æ—¶æ‰§è¡Œå®Œå°±è·³å‡ºç»“æŸæµç¨‹äº†, é‚£ä¹ˆcss-loaderæ€ä¹ˆåŠ? æ­¤æ—¶å°±éœ€è¦é€šè¿‡<code>remainingRequest</code>é‡æ–°è¿›è¡ŒåŠ è½½</li><li><code>stringifyRequest</code>æ˜¯ä¸ºäº†æŠŠloaderè½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„,å› ä¸ºwebpackå†…é“¾æ‰§è¡Œéƒ½æ˜¯ç›¸å¯¹çš„, æ‰€ä»¥éœ€è¦è½¬æ¢æˆç›¸å¯¹è·¯å¾„.</li></ul><h3 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h3><figure class="highlight js"><figcaption><span>[toggle]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> loaderUtils = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;loader-utils&quot;</span>);<br><span class="hljs-keyword">const</span> tokenizer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;css-selector-tokenizer&quot;</span>);<br><span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;postcss&quot;</span>);<br><span class="hljs-comment">// @importå¼•å…¥çš„cssåŒ…å«è¿›æ¥</span><br><span class="hljs-comment">// urlè·¯å¾„å˜æˆè¾“å‡ºè·¯å¾„,å¦‚background:url(./a.png)</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;åŠ è½½css-loader&quot;</span>);<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">cssPlugin</span> = (<span class="hljs-params">options</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">cssRoot</span>) =&gt;</span> &#123;<br>      <span class="hljs-comment">// cssRootå°±æ˜¯astè¯­æ³•æ ‘</span><br>      <span class="hljs-comment">//   console.log(cssRoot,&#x27;cssRoot&#x27;);</span><br>      <span class="hljs-comment">//   éå†ast, æ‰€æœ‰@import xxè§„åˆ™</span><br>      cssRoot.<span class="hljs-title function_">walkAtRules</span>(<span class="hljs-regexp">/^import$/</span>, <span class="hljs-function">(<span class="hljs-params">rule</span>) =&gt;</span> &#123;<br>        rule.<span class="hljs-title function_">remove</span>(); <span class="hljs-comment">// åˆ é™¤@import xx è§„åˆ™</span><br>        options.<span class="hljs-property">imports</span>.<span class="hljs-title function_">push</span>(rule.<span class="hljs-property">params</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>)); <span class="hljs-comment">// å»é™¤æœ€å¤–å±‚åŒå¼•å·, å› ä¸ºastexplore, rule.paramsè·å–çš„æ˜¯&quot;&#x27;a.css&#x27;&quot;, ç„¶åæ·»åŠ åˆ°importsæ•°ç»„ä¸­ ,å¦‚&#x27;a.css&#x27;,</span><br>      &#125;);<br>      <span class="hljs-comment">//   éå†ast, æ‰€æœ‰background:url(xx)è§„åˆ™</span><br>      cssRoot.<span class="hljs-title function_">walkDecls</span>(<span class="hljs-regexp">/^background$/</span>, <span class="hljs-function">(<span class="hljs-params">decl</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">let</span> values = tokenizer.<span class="hljs-title function_">parseValues</span>(decl.<span class="hljs-property">value</span>);<br>        values.<span class="hljs-property">nodes</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>          value.<span class="hljs-property">nodes</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">if</span> (item.<span class="hljs-property">type</span> === <span class="hljs-string">&quot;url&quot;</span>) &#123;<br>              <span class="hljs-comment">// å˜æˆç›¸å¯¹è·¯å¾„å¹¶requireå…±webpackå…¶ä»–loaderè§£æ</span><br>              item.<span class="hljs-property">url</span> =<br>                <span class="hljs-string">&quot;`+require(&quot;</span> +<br>                loaderUtils.<span class="hljs-title function_">stringifyRequest</span>(<span class="hljs-variable language_">this</span>, item.<span class="hljs-property">url</span>) +<br>                <span class="hljs-string">&quot;)+`&quot;</span>;<br>            &#125;<br>          &#125;);<br>        &#125;);<br>        decl.<span class="hljs-property">value</span> = tokenizer.<span class="hljs-title function_">stringifyValues</span>(values);<br>        <span class="hljs-comment">// console.log(decl, &quot;decl&quot;);</span><br>      &#125;);<br>    &#125;;<br>  &#125;;<br>  <span class="hljs-keyword">let</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">async</span>();<br>  <span class="hljs-keyword">let</span> options = &#123;<br>    <span class="hljs-attr">imports</span>: [], <span class="hljs-comment">// å¼•å…¥çš„css(å»é™¤@import) å¦‚ @import &#x27;a.css&#x27; ä¸­çš„ a.css</span><br>  &#125;;<br>  <span class="hljs-keyword">let</span> pipeLine = <span class="hljs-title function_">postcss</span>([<span class="hljs-title function_">cssPlugin</span>(options)]);<br>  pipeLine.<span class="hljs-title function_">process</span>(source).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> imports = options.<span class="hljs-property">imports</span><br>      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> (<br>          <span class="hljs-string">&quot;`+require(&quot;</span> +<br>          loaderUtils.<span class="hljs-title function_">stringifyRequest</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">&quot;!!css-loader1!&quot;</span> + url) +<br>          <span class="hljs-string">&quot;)+`&quot;</span><br>        );<br>      &#125;)<br>      .<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>    <span class="hljs-comment">// let output = &quot;module.exports = `&quot;  + result.css + &quot;`&quot;; // æ‹¼æ¥@import xxçš„csså’Œæ™®é€šçš„css,å¦‚div&#123;xx&#125;</span><br>    <span class="hljs-keyword">let</span> output = <span class="hljs-string">&quot;module.exports=`&quot;</span> + imports + <span class="hljs-string">&quot;\r\n&quot;</span> + result.<span class="hljs-property">css</span> + <span class="hljs-string">&quot;`&quot;</span>; <span class="hljs-comment">// æ‹¼æ¥@import xxçš„csså’Œæ™®é€šçš„css,å¦‚div&#123;xx&#125;</span><br>    output = output.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\\&quot;/g</span>, <span class="hljs-string">&#x27;&quot;&#x27;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(output, <span class="hljs-string">&quot;output&quot;</span>);<br>    <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, output);<br>  &#125;);<br>&#125;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = loader;<br></code></pre></td></tr></table></figure><h4 id="æ€»ç»“-4"><a href="#æ€»ç»“-4" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul><li><code>css-loader</code>ä¾èµ–postcssè§£æast</li><li>åˆ†æast,æ‰¾åˆ°æ‰€æœ‰<code>@import xx</code>è§„åˆ™çš„url, è½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„å¹¶æ‹¼æ¥ä¸Š<code>css-loader</code>å¹¶require, é€šè¿‡å†…é“¾çš„æ–¹å¼è¿›è¡Œæ‰§è¡Œ</li><li>åˆ†æast,æ‰¾åˆ°æ‰€æœ‰<code>background:url(xx)</code>è§„åˆ™, è½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„å¹¶require,ä¾›webpackçš„å…¶ä»–loaderè§£æ</li><li>å› ä¸ºéƒ½è¦é€šè¿‡requireå¼•ç”¨, æ‰€ä»¥è‚¯å®šæ˜¯ä¸ªjsè„šæœ¬, æ‰€ä»¥éœ€è¦<code>style-loader</code>åœ¨pitchå°±å¾—æ‰§è¡Œ,è€Œä¸æ˜¯<code>css-loader</code>æ‰§è¡Œå¯¼è‡´styleæ ‡ç­¾ä¸­çš„æ˜¯jsè„šæœ¬</li></ul><p>ç®€å•æ¥è¯´ï¼Œå¦‚æœåœ¨loaderå¼€å‘ä¸­ä½ çš„éœ€è¦ä¾èµ–å…¶ä»–loaderï¼Œä½†æ­¤æ—¶ä¸Šä¸€ä¸ªloaderçš„normalå‡½æ•°è¿”å›çš„å¹¶ä¸æ˜¯å¤„ç†åçš„èµ„æºæ–‡ä»¶å†…å®¹è€Œæ˜¯ä¸€æ®µjsè„šæœ¬ï¼Œé‚£ä¹ˆå°†ä½ çš„loaderé€»è¾‘è®¾è®¡åœ¨pitché˜¶æ®µæ— ç–‘æ˜¯ä¸€ç§æ›´å¥½çš„æ–¹å¼ã€‚</p><h2 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h2><p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªbabel-loaderæ¥è¿›è¡Œes6è½¬es5,å¸Œæœ›ä¸‹é¢ç®­å¤´å‡½æ•°è½¬æ¢ä¸ºes5</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// src/index.js</span><br><span class="hljs-keyword">let</span> <span class="hljs-title function_">sum</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// src/loaders/babel-loader.js</span><br><span class="hljs-keyword">let</span> babel = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@babel/core&quot;</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">source</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;åŠ è½½babel-loader&quot;</span>);<br>  <span class="hljs-keyword">let</span> options = &#123;<br>    <span class="hljs-attr">presets</span>: [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>], <span class="hljs-comment">// é¢„è®¾(æ’ä»¶é›†åˆ), babelæœ¬è´¨å°±æ˜¯ä¸€ä¸ªè½¬æ¢å™¨, éœ€è¦é¢„è®¾/æ’ä»¶æ‰èƒ½è½¬æ¢ä»£ç ,å¦åˆ™å°±æ˜¯ä¸€ä¸ªæµç¨‹å™¨</span><br>    <span class="hljs-comment">// ç”ŸæˆsourceMap (æ³¨æ„: è¿™é‡Œè®¾ä¸ºtrue, åªæ˜¯è¡¨ç¤ºbabelä¼šç”ŸæˆsourceMapç»™webpack, æœ€ç»ˆæ‰“åŒ…æ˜¯å¦ç”ŸæˆsourceMapæ–‡ä»¶,æ˜¯webpackæ§åˆ¶çš„, æ‰€ä»¥è¿˜éœ€è¦webpackçš„é…ç½®devtool:source-map, å¦åˆ™sourceMapæ–‡ä»¶ä¸ä¼šç”Ÿæˆ)</span><br>    <span class="hljs-comment">// æ­¤å¤„ä¸ºtrue, webpackçš„devtool:source-map,  è°ƒè¯•ä¼šçœ‹åˆ°index.js,ä¸”æ˜¯es6æºä»£ç </span><br>    <span class="hljs-comment">// æ­¤å¤„ä¸ºfalse, webpackçš„devtool:source-map,  è°ƒè¯•ä¼šçœ‹åˆ°index.js, ä¸”æ˜¯es5ä»£ç </span><br>    <span class="hljs-comment">// æ­¤å¤„ä¸ºtrue, webpackçš„devtool:false,  è°ƒè¯•ä¼šçœ‹åˆ°main.js, ä¸”æ˜¯es5ä»£ç </span><br>    <span class="hljs-comment">// æ­¤å¤„ä¸ºfalse, webpackçš„devtool:false,  è°ƒè¯•ä¼šçœ‹åˆ°main.js, ä¸”æ˜¯es5ä»£ç </span><br>    <span class="hljs-comment">// æ‰€ä»¥éœ€è¦åŒæ—¶å¼€å¯æ‰èƒ½åœ¨è°·æ­Œæ§åˆ¶å°çœ‹åˆ°es6æºä»£ç +æºæ–‡ä»¶</span><br>    <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">true</span>, <br>  &#125;;<br>  <span class="hljs-comment">//   è½¬æ¢åçš„es5ä»£ç  source-mapæ–‡ä»¶ æŠ½è±¡è¯­æ³•æ ‘</span><br>  <span class="hljs-keyword">const</span> &#123; code, map, ast &#125; = babel.<span class="hljs-title function_">transform</span>(source, options);<br>  <span class="hljs-comment">//   å› ä¸ºbabelè½¬æ¢åæä¾›äº†ast, é‚£ä¹ˆwebpackä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªast, ä¸ä¼šè‡ªå·±å†é€šè¿‡acronè§£æå™¨å°†codeè½¬astäº†, æé«˜æ•ˆç‡, æ‰€ä»¥å¦‚æœloaderæœ‰ast,å¯ä»¥ç›´æ¥ç”¨</span><br><span class="hljs-comment">//  åœ¨loaderæ‰§è¡Œæ—¶,thisæŒ‡å‘loaderContext, å®ƒä¸Šé¢æœ‰ä¸ªcallbackæ–¹æ³•, ç”¨æ¥è¿”å›ç»“æœ</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, code, map, ast);<br>&#125;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = loader;<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“-5"><a href="#æ€»ç»“-5" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>åŸç†å¾ˆç®€å•, <strong>loaderæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°</strong>, æœ€ç»ˆé€šè¿‡<strong>this.callback</strong>ç»™webpackè¿”å›ç»“æœ, webpackä¼šæ ¹æ®è¿”å›ç»“æœè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ<ul><li>callbackæ¥æ”¶ä¸‰ä¸ªå‚æ•°: code-è½¬æ¢åçš„es5ä»£ç , map-sourceMapæ–‡ä»¶, ast-æŠ½è±¡è¯­æ³•æ ‘</li><li>å› ä¸ºbabelè½¬æ¢åæä¾›äº†ast, æ‰€ä»¥è°ƒç”¨callbackä¼ è¿›å», é‚£ä¹ˆwebpackä¼š<strong>ç›´æ¥ä½¿ç”¨è¿™ä¸ªast</strong>, ä¸ä¼šè‡ªå·±å†é€šè¿‡acronè§£æå™¨å°†codeè½¬astäº†, æé«˜æ•ˆç‡, æ‰€ä»¥å¦‚æœloaderæœ‰ast,å¯ä»¥ç›´æ¥ç”¨</li></ul></li><li>loaderçš„sourceMapå’Œwebpack.config.jsä¸­çš„devtool:â€™source-mapâ€™éœ€è¦<strong>åŒæ—¶å¼€å¯,æ‰ä¼šç”Ÿæ•ˆ</strong><ul><li>webpackçš„devtool:source-mapã€loaderçš„sourceMap:true, è°·æ­Œæ§åˆ¶å°è°ƒè¯•ä¼šçœ‹åˆ°index.js, æ˜¯es6æºä»£ç </li><li>webpackçš„devtool:source-mapã€loaderçš„sourceMap:false, ä¼šçœ‹åˆ°index.js, æ˜¯es5ä»£ç </li><li>webpackçš„devtool:falseã€loaderçš„sourceMap:true, ä¼šçœ‹åˆ°main.js, æ˜¯es5ä»£ç </li><li>webpackçš„devtool:falseã€loaderçš„sourceMap:false, ä¼šçœ‹åˆ°main.js, æ˜¯es5ä»£ç </li></ul></li></ul><blockquote><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/659040417">å­¦ä¹ webpack loader</a></p></blockquote></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://mystylemylife.github.io/ypf-blog">ypf</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://mystylemylife.github.io/ypf-blog/2024/12/30/webpack4/4.loader/">https://mystylemylife.github.io/ypf-blog/2024/12/30/webpack4/4.loader/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://mystylemylife.github.io/ypf-blog" target="_blank">ypfçš„åšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/ypf-blog/2025/01/14/webpack4/5.tapable/" title="5.tapable"><div class="cover" style="background:var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">5.tapable</div></div></a></div><div class="next-post pull-right"><a href="/ypf-blog/2024/12/23/webpack4/3.%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/" title="3.å·¥ä½œæµç¨‹"><div class="cover" style="background:var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">3.å·¥ä½œæµç¨‹</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89loader"><span class="toc-number">1.</span> <span class="toc-text">ä¸ºä»€ä¹ˆä¼šæœ‰loader</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">ç”¨æ³•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#loader%E5%88%86%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">loaderåˆ†ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEloader"><span class="toc-number">3.1.</span> <span class="toc-text">é…ç½®loader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E8%81%94loader"><span class="toc-number">3.2.</span> <span class="toc-text">å†…è”loader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5loader"><span class="toc-number">3.3.</span> <span class="toc-text">å¼‚æ­¥loader</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#loader%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">4.</span> <span class="toc-text">loaderæ‰§è¡Œé¡ºåº</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0pitch"><span class="toc-number">4.1.</span> <span class="toc-text">æ— pitch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89pitch"><span class="toc-number">4.2.</span> <span class="toc-text">æœ‰pitch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%F0%9F%8C%B01"><span class="toc-number">4.2.1.</span> <span class="toc-text">ä¾‹å­ğŸŒ°1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%F0%9F%8C%B02"><span class="toc-number">4.2.2.</span> <span class="toc-text">ä¾‹å­ğŸŒ°2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.3.</span> <span class="toc-text">æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#loader-runner"><span class="toc-number">4.3.1.</span> <span class="toc-text">loader-runner</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8loader"><span class="toc-number">5.</span> <span class="toc-text">å¸¸ç”¨loader</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#file-loader"><span class="toc-number">5.1.</span> <span class="toc-text">file-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">5.1.1.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#url-loader"><span class="toc-number">5.2.</span> <span class="toc-text">url-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">5.2.1.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#style-loader%E5%92%8Cless-loader"><span class="toc-number">5.3.</span> <span class="toc-text">style-loaderå’Œless-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#style-loader%E4%BD%BF%E7%94%A8normal"><span class="toc-number">5.3.1.</span> <span class="toc-text">style-loaderä½¿ç”¨normal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-3"><span class="toc-number">5.3.2.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#style-loader%E5%92%8Ccss-loader"><span class="toc-number">5.4.</span> <span class="toc-text">style-loaderå’Œcss-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#style-loader%E4%BD%BF%E7%94%A8pitch"><span class="toc-number">5.4.1.</span> <span class="toc-text">style-loaderä½¿ç”¨pitch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css-loader"><span class="toc-number">5.4.2.</span> <span class="toc-text">css-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-4"><span class="toc-number">5.4.2.1.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#babel-loader"><span class="toc-number">5.5.</span> <span class="toc-text">babel-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-5"><span class="toc-number">5.5.1.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By ypf</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/ypf-blog/js/utils.js?v=4.13.0"></script><script src="/ypf-blog/js/main.js?v=4.13.0"></script><script src="https://cdn.staticfile.net/medium-zoom/1.1.0/medium-zoom.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/17.8.8/lazyload.min.js"></script><div class="js-pjax"></div><script src="https://cdn.staticfile.net/jquery/3.7.1/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/mystylemylife/ypf-blog/assets/js/code-collapse.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/ypf-blog/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>